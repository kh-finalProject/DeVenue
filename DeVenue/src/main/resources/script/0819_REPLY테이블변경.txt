DROP TABLE P_REPLY;

CREATE TABLE P_REPLY (
	PRO_RID	NUMBER		NOT NULL,
	PRO_ID	NUMBER		NOT NULL,
	MEM_ID	NUMBER		NOT NULL,
	PRO_RCONTENT	VARCHAR2(1000)		NOT NULL,
	PRO_RCREATE_DATE	DATE	DEFAULT SYSDATE	NOT NULL,
	PRO_RMODIFY_DATE	DATE	DEFAULT SYSDATE	NULL,
	PRO_RANSWER	VARCHAR2(1) DEFAULT 'N'	NULL,
	PRO_RSTATUS	VARCHAR2(1)	DEFAULT 'N'	NULL,
	PRO_PARENT_RID	NUMBER		NOT NULL,
	PRO_RSECRET	VARCHAR2(1)	DEFAULT 'N'	NULL
);

COMMENT ON COLUMN P_REPLY.PRO_RID IS '100~';

COMMENT ON COLUMN P_REPLY.MEM_ID IS '회원 기본키';

COMMENT ON COLUMN P_REPLY.PRO_RANSWER IS 'Y/N';

COMMENT ON COLUMN P_REPLY.PRO_RSTATUS IS 'Y /N';

COMMENT ON COLUMN P_REPLY.PRO_RSECRET IS '비밀글여부';

--식별자
ALTER TABLE P_REPLY ADD CONSTRAINT PK_P_REPLY PRIMARY KEY (
	PRO_RID
);

--외래키
ALTER TABLE P_REPLY ADD CONSTRAINT FK_PROJECT_TO_P_REPLY_1 FOREIGN KEY (
	PRO_ID
)
REFERENCES PROJECT (
	PRO_ID
);

ALTER TABLE P_REPLY ADD CONSTRAINT FK_MEMBER_TO_P_REPLY_1 FOREIGN KEY (
	MEM_ID
)
REFERENCES MEMBER (
	MEM_ID
);

ALTER TABLE P_REPLY ADD CONSTRAINT FK_P_REPLY_TO_P_REPLY_1 FOREIGN KEY (
	PRO_PARENT_RID
)
REFERENCES P_REPLY (
	PRO_RID
);

--CHECK 제약조건
ALTER TABLE P_REPLY ADD CONSTRAINT PRO_RANSWER_CHECK CHECK(PRO_RANSWER IN ('Y', 'N'));
ALTER TABLE P_REPLY ADD CONSTRAINT PRO_RSTATUS_CHECK CHECK(PRO_RSTATUS IN ('Y', 'N'));
ALTER TABLE P_REPLY ADD CONSTRAINT PRO_RSECRET_CHECK CHECK(PRO_RSECRET IN ('Y', 'N'));

